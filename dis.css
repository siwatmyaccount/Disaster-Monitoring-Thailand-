/* Base Setup */
body { 
    font-family: 'Kanit', sans-serif; 
    background-color: #0f172a; 
    overflow: hidden; 
    overscroll-behavior: none;
    -webkit-tap-highlight-color: transparent;
}

#map { height: 100dvh; width: 100%; z-index: 1; background: #0f172a; }

/* Glassmorphism */
.glass-panel {
    background: rgba(15, 23, 42, 0.90);
    backdrop-filter: blur(16px);
    -webkit-backdrop-filter: blur(16px);
    border: 1px solid rgba(0, 242, 255, 0.2);
    box-shadow: 0 4px 20px rgba(0,0,0,0.6);
}
.glass-success { border-color: rgba(34, 197, 94, 0.5); background: rgba(6, 41, 20, 0.9); }
.text-neon { text-shadow: 0 0 8px rgba(0, 242, 255, 0.8); }
.text-neon-red { text-shadow: 0 0 8px rgba(239, 68, 68, 0.8); }

/* Pulse Marker Customization */
.pulse-icon { position: relative; display: flex; align-items: center; justify-content: center; }
.pulse-ring {
    position: absolute; width: 100%; height: 100%; border-radius: 50%;
    animation: pulse-ring 2s cubic-bezier(0.215, 0.61, 0.355, 1) infinite;
}
.pulse-dot { width: 12px; height: 12px; border-radius: 50%; z-index: 2; box-shadow: 0 0 10px currentColor; }
@keyframes pulse-ring { 0% { transform: scale(0.8); opacity: 1; } 100% { transform: scale(3); opacity: 0; } }

/* Shelter Icon */
.shelter-icon { text-align: center; color: #4ade80; text-shadow: 0 0 5px #22c55e; font-size: 24px; }

/* Popup Customization */
.leaflet-popup-content-wrapper { background: rgba(6, 11, 25, 0.95); color: white; border: 1px solid #334155; padding: 0; font-family: 'Kanit', sans-serif; }
.leaflet-popup-content { margin: 0; width: 280px !important; }
.leaflet-popup-tip { background: #334155; }
.leaflet-container a.leaflet-popup-close-button { color: #fff; }

/* SOS Pulse */
@keyframes sos-pulse { 0% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0.7); } 70% { box-shadow: 0 0 0 20px rgba(239, 68, 68, 0); } 100% { box-shadow: 0 0 0 0 rgba(239, 68, 68, 0); } }
.sos-active { animation: sos-pulse 2s infinite; }

/* Triage Buttons (Reduced Size) */
.triage-btn {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 0.5rem; /* ลด Padding ให้เล็กลง */
    border-radius: 0.5rem; border: 1px solid;
    transition: all 0.2s;
    font-weight: bold; font-size: 0.75rem; /* ลดขนาดตัวอักษร */
    color: #e5e7eb;
}
.triage-btn i {
    font-size: 1.25rem; /* ลดขนาดไอคอน */
    margin-bottom: 0.25rem;
}
.triage-btn:hover { color: white; transform: scale(1.05); }
.triage-btn:active { transform: scale(0.95); }

/* Navigation Button */
.nav-btn {
    display: flex; align-items: center; justify-content: center;
    gap: 0.5rem; width: 100%; margin-top: 0.75rem;
    background: #0ea5e9; color: white; padding: 0.5rem;
    border-radius: 0.25rem; font-size: 0.85rem; font-weight: bold;
    transition: background 0.2s;
}
.nav-btn:hover { background: #0284c7; }

/* Safety Pulse Animation */
@keyframes safety-beat {
    0% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.7); transform: scale(1); }
    50% { box-shadow: 0 0 0 10px rgba(34, 197, 94, 0); transform: scale(1.02); }
    100% { box-shadow: 0 0 0 0 rgba(34, 197, 94, 0); transform: scale(1); }
}
.safety-pulse-btn {
    animation: safety-beat 3s infinite;
}
.safety-pulse-btn:hover { animation: none; }

/* Strobe Light Effect */
@keyframes strobe-flash {
    0% { opacity: 1; background-color: white; }
    50% { opacity: 0; }
    51% { opacity: 1; background-color: #ef4444; }
    100% { opacity: 0; }
}
.strobe-active {
    animation: strobe-flash 0.1s infinite;
}

/* Tool Buttons */
.tool-btn {
    display: flex; flex-direction: column; align-items: center; justify-content: center;
    padding: 1.5rem; border-radius: 1rem; border: 1px solid;
    transition: all 0.2s;
}
.tool-active { background-color: #f59e0b !important; border-color: #fbbf24 !important; color: black !important; }
.tool-active i { color: black !important; }

/* Toast Animation */
.toast-enter { transform: translateX(100%); opacity: 0; }
.toast-enter-active { transform: translateX(0); opacity: 1; transition: all 0.3s ease-out; }
.toast-exit { transform: translateX(0); opacity: 1; }
.toast-exit-active { transform: translateX(100%); opacity: 0; transition: all 0.3s ease-in; }

input, textarea, select { font-size: 16px !important; }

/* Scrollbar Hide */
.scrollbar-hide::-webkit-scrollbar { display: none; }
.scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }

/* Safe Area Support */
.safe-top { padding-top: max(8px, env(safe-area-inset-top)); }